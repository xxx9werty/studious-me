컨셉
- 쿠버네티스 오브젝트가 쿠버네티스 API에서 어떻게 표현되고, 그 오브젝트를 어떻게 `.yaml` 형식으로 표현할 수 있는지

## 쿠버네티스 오브젝트 이해하기
*쿠버네티스 오브젝트*는 쿠버네티스 시스템에서 영속성을 가지는 오브젝트이다. 쿠버네티스는 클러스터의 상태를 나타내기 위해 이 오브젝트를 이용한다.
- 어떤 컨테이너화된 애플리케이션이 동작 중인지 (+ 어느 노드에서 동작 중인지)
- 그 애플리케이션이 이용할 수 있는 리소스
- 그 애플리케이션이 어떻게 재구동 정책, 업그레이드, 그리고 내고장성과 같은 것에 동작해야 하는지에 대한 정책

### 오브젝트 명세(spec)와 상태(status)
거의 모든 쿠버네티스 오브젝트는 오브젝트의 구성을 결정해주는 두 개의 중첩된 오브젝트 필드를 포함하는데 오브젝트 `spec`과 오브젝트 `status`이다. `spec`을 가진 오브젝트는 오브젝트를 생성할 때 리소스에 원하는 특징에 대한 설명을 제공해서 설정한다.

`status`는 쿠버네티스 시스템과 컴포넌트에 의해 제공되고 업데이트된 오브젝트의 *현재 상태*를 설명한다. 쿠버네티스 컨트롤 플레인은 모든 오브젝트의 실제 상태를 사용자가 의도한 상태와 일치시키기 위해 능동적으로 관리한다.

> 컨트롤 플레인
> 컨테이너의 라이프사이클을 정의, 배포, 관리하기 위한 API와 인터페이스들을 노출하는 컨테이너 오케스트레이션 레이어

### 쿠버네티스 오브젝트 기술하기
대부분의 경우 정보를 `.yaml` 파일로 `kubectl`에 제공한다. `kubectl`은 API 요청이 이루어질 때, `JSON` 형식으로 정보를 변환시켜 준다.

`.yaml` 파일 예시
```
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-deployment
spec:
  selector:
    matchLabels:
      app: nginx
  replicas: 2 # tells deployment to run 2 pods matching the template
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: nginx:1.14.2
        ports:
        - containerPort: 80
```
`.yaml` 파일을 이용하여 Deployment를 생성하기 위한 하나의 방식으로는 kubectl 커맨드-라인 인터페이스에 인자값으로 `.yaml` 파일을 건네 `kubectl apply` 커맨드를 이용하는 것이다.
```
kubectl apply -f deployment.yaml
```

### 요구되는 필드
생성하고자 하는 쿠버네티스 오브젝트에 대한 `.yaml` 파일 내, 다음 필드를 위한 값들을 설정해 줘야한다.
- apiVersion : 이 오브젝트를 생성하기 위해 사용하고 있는 쿠버네티스 API 버전이 어떤 것인지
- kind : 어떤 종류의 오브젝트를 생성하고자 하는지
- metadata : `이름` 문자열, `UID`, 그리고 선택적인 `네임스페이스`를 포함하여 오브젝트를 유일하게 구분지어 줄 데이터
- spec: 오브젝트에 대해 어떤 상태를 의도하는지

오브젝트 `spec`에 대한 정확한 포맷은 모든 쿠버네티스 오브젝트마다 다르고, 그 오브젝트 특유의 중첩된 필드를 포함한다.